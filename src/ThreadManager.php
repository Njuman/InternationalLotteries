<?phpnamespace InternationalLotteries;use LimitIterator;use SplFileObject;class ThreadManager{    private SplFileObject $file;    private array $result;    private int $numThreads;    public function __construct(SplFileObject $file, int $numThreads)    {        $this->file = $file;        $this->numThreads = $numThreads;    }    public function run(callable $callback)    {        $chunkSize = ceil($this->numOfRow() / $this->numThreads);        $threads = [];        for ($i = 0; $i < $this->numThreads; $i++) {            $start = $i * $chunkSize;            $this->file->seek($start);            $chunkFile = new LimitIterator($this->file, $start, $chunkSize);            $threads[] = new \Thread();        }        foreach ($threads as $thread) {            $thread->start();        }        foreach ($threads as $thread) {            $thread->join();        }    }    private function numOfRow(): int    {        $filename = $this->file->getPathname();        $command = "grep -v '^$' " . escapeshellarg($filename) . " | wc -l";        $output = exec($command);        return intval(trim($output));    }}